{"path": "output/hf-eval-data-v3-valid/f00567_create_artistic_variations.py", "content": "# function_import --------------------\n\nfrom diffusers import StableDiffusionImageVariationPipeline\nfrom PIL import Image\nfrom torchvision.transforms import Compose, ToTensor, Resize, InterpolationMode, Normalize\n\n# function_code --------------------\n\ndef create_artistic_variations(image_path: str, output_path: str) -> None:\n    '''\n    Create artistic variations of an input image using StableDiffusionImageVariationPipeline.\n\n    Args:\n        image_path (str): The path to the input image.\n        output_path (str): The path to save the output image.\n\n    Returns:\n        None\n    '''\n    sd_pipe = StableDiffusionImageVariationPipeline.from_pretrained('lambdalabs/sd-image-variations-diffusers', revision='v2.0')\n    im = Image.open(image_path)\n    tform = Compose([\n        ToTensor(),\n        Resize((224, 224), interpolation=InterpolationMode.BICUBIC, antialias=False),\n        Normalize([0.48145466, 0.4578275, 0.40821073], [0.26862954, 0.26130258, 0.27577711]),\n    ])\n    inp = tform(im).unsqueeze(0)\n    out = sd_pipe(inp, guidance_scale=3)\n    out['images'][0].save(output_path)\n\n# test_function_code --------------------\n\ndef test_create_artistic_variations():\n    '''\n    Test the function create_artistic_variations.\n    '''\n    import os\n    import requests\n    from PIL import Image\n    from io import BytesIO\n\n    # Download a test image\n    url = 'https://placekitten.com/200/300'\n    response = requests.get(url)\n    img = Image.open(BytesIO(response.content))\n    img.save('test.jpg')\n\n    # Apply the function\n    create_artistic_variations('test.jpg', 'output.jpg')\n\n    # Check the output\n    assert os.path.exists('output.jpg'), 'Output image does not exist.'\n\n    # Clean up\n    os.remove('test.jpg')\n    os.remove('output.jpg')\n\n    return 'All Tests Passed'\n\n# call_test_function_code --------------------\n\ntest_create_artistic_variations()", "function_import": "# function_import --------------------\n\nfrom diffusers import StableDiffusionImageVariationPipeline\nfrom PIL import Image\nfrom torchvision.transforms import Compose, ToTensor, Resize, InterpolationMode, Normalize\n\n", "function_code": "# function_code --------------------\n\ndef create_artistic_variations(image_path: str, output_path: str) -> None:\n    '''\n    Create artistic variations of an input image using StableDiffusionImageVariationPipeline.\n\n    Args:\n        image_path (str): The path to the input image.\n        output_path (str): The path to save the output image.\n\n    Returns:\n        None\n    '''\n    sd_pipe = StableDiffusionImageVariationPipeline.from_pretrained('lambdalabs/sd-image-variations-diffusers', revision='v2.0')\n    im = Image.open(image_path)\n    tform = Compose([\n        ToTensor(),\n        Resize((224, 224), interpolation=InterpolationMode.BICUBIC, antialias=False),\n        Normalize([0.48145466, 0.4578275, 0.40821073], [0.26862954, 0.26130258, 0.27577711]),\n    ])\n    inp = tform(im).unsqueeze(0)\n    out = sd_pipe(inp, guidance_scale=3)\n    out['images'][0].save(output_path)\n\n", "test_function_code": "# test_function_code --------------------\n\ndef test_create_artistic_variations():\n    '''\n    Test the function create_artistic_variations.\n    '''\n    import os\n    import requests\n    from PIL import Image\n    from io import BytesIO\n\n    # Download a test image\n    url = 'https://placekitten.com/200/300'\n    response = requests.get(url)\n    img = Image.open(BytesIO(response.content))\n    img.save('test.jpg')\n\n    # Apply the function\n    create_artistic_variations('test.jpg', 'output.jpg')\n\n    # Check the output\n    assert os.path.exists('output.jpg'), 'Output image does not exist.'\n\n    # Clean up\n    os.remove('test.jpg')\n    os.remove('output.jpg')\n\n    return 'All Tests Passed'\n\n", "call_test_function_code": "# call_test_function_code --------------------\n\ntest_create_artistic_variations()", "instruct": "# function_import --------------------\n\nfrom diffusers import StableDiffusionImageVariationPipeline\nfrom PIL import Image\nfrom torchvision.transforms import Compose, ToTensor, Resize, InterpolationMode, Normalize\n\n# function_code --------------------\n\ndef create_artistic_variations(image_path: str, output_path: str) -> None:\n    '''\n    Create artistic variations of an input image using StableDiffusionImageVariationPipeline.\n\n    Args:\n        image_path (str): The path to the input image.\n        output_path (str): The path to save the output image.\n\n    Returns:\n        None\n    '''", "answer": "\n    sd_pipe = StableDiffusionImageVariationPipeline.from_pretrained('lambdalabs/sd-image-variations-diffusers', revision='v2.0')\n    im = Image.open(image_path)\n    tform = Compose([\n        ToTensor(),\n        Resize((224, 224), interpolation=InterpolationMode.BICUBIC, antialias=False),\n        Normalize([0.48145466, 0.4578275, 0.40821073], [0.26862954, 0.26130258, 0.27577711]),\n    ])\n    inp = tform(im).unsqueeze(0)\n    out = sd_pipe(inp, guidance_scale=3)\n    out['images'][0].save(output_path)\n\n", "prediction": "\n\n    # Setup --------------------\n\n    device = 'cuda' if torch.cuda.is_available() else 'cpu'\n    \n    model = StableDiffusionImageVariationPipeline(device)\n    model = model.to(device)\n\n    transforms = Compose([Resize((model.image_size, model.image_size), interpolation=InterpolationMode.BICUBIC), ToTensor(), Normalize((0.5, 0.5, 0.5), (1, 1, 1)), lambda t: t[:3, ...]])\n    \n    # Load image and process --------------------\n\n    img_pil = Image.open(image_path)\n    img_tensor = transforms(img_pil).unsqueeze(0).to(device)\n\n    output = model.run(img_tensor, 100)\n    pil_transforms = Compose([ToTensor()])\n    \n    # Save image --------------------\n\n    torchvision.utils.save_image((pil_transforms(output[0].cpu())), output_path)"}