2023-11-30 19:45:27.598811: I tensorflow/core/platform/cpu_feature_guard.cc:182] This TensorFlow binary is optimized to use available CPU instructions in performance-critical operations.
To enable the following instructions: AVX2 FMA, in other operations, rebuild TensorFlow with the appropriate compiler flags.
2023-11-30 19:45:28.311231: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38] TF-TRT Warning: Could not find TensorRT
preprocessor_config.json:   0%|                                                       | 0.00/380 [00:00<?, ?B/s]preprocessor_config.json: 100%|█████████████████████████████████████████████████| 380/380 [00:00<00:00, 110kB/s]
/root/autodl-tmp/conda-envs/py38/lib/python3.8/site-packages/transformers/models/maskformer/feature_extraction_maskformer.py:28: FutureWarning: The class MaskFormerFeatureExtractor is deprecated and will be removed in version 5 of Transformers. Please use MaskFormerImageProcessor instead.
  warnings.warn(
/root/autodl-tmp/conda-envs/py38/lib/python3.8/site-packages/transformers/models/maskformer/image_processing_maskformer.py:410: FutureWarning: The `size_divisibility` argument is deprecated and will be removed in v4.27. Please use `size_divisor` instead.
  warnings.warn(
/root/autodl-tmp/conda-envs/py38/lib/python3.8/site-packages/transformers/models/maskformer/image_processing_maskformer.py:417: FutureWarning: The `max_size` argument is deprecated and will be removed in v4.27. Please use size['longest_edge'] instead.
  warnings.warn(
config.json:   0%|                                                                  | 0.00/12.5k [00:00<?, ?B/s]config.json: 100%|█████████████████████████████████████████████████████████| 12.5k/12.5k [00:00<00:00, 3.20MB/s]
pytorch_model.bin:   0%|                                                             | 0.00/412M [00:00<?, ?B/s]pytorch_model.bin:   3%|█▎                                                  | 10.5M/412M [00:02<01:46, 3.77MB/s]pytorch_model.bin:   5%|██▋                                                 | 21.0M/412M [00:03<01:08, 5.71MB/s]pytorch_model.bin:   8%|███▉                                                | 31.5M/412M [00:05<00:56, 6.69MB/s]pytorch_model.bin:  10%|█████▎                                              | 41.9M/412M [00:06<00:58, 6.33MB/s]pytorch_model.bin:  13%|██████▌                                             | 52.4M/412M [00:18<03:02, 1.97MB/s]pytorch_model.bin:  13%|██████▌                                             | 52.4M/412M [00:30<03:02, 1.97MB/s]pytorch_model.bin:  15%|████████                                             | 62.9M/412M [00:40<06:04, 955kB/s]pytorch_model.bin:  18%|█████████▍                                           | 73.4M/412M [00:50<05:42, 986kB/s]pytorch_model.bin:  18%|█████████▍                                           | 73.4M/412M [01:10<05:42, 986kB/s]pytorch_model.bin:  20%|██████████▊                                          | 83.9M/412M [01:14<07:46, 703kB/s]pytorch_model.bin:  20%|██████████▊                                          | 83.9M/412M [01:30<07:46, 703kB/s]pytorch_model.bin:  23%|████████████▏                                        | 94.4M/412M [01:37<08:48, 600kB/s]pytorch_model.bin:  23%|████████████▏                                        | 94.4M/412M [01:50<08:48, 600kB/s]pytorch_model.bin:  25%|█████████████▊                                        | 105M/412M [01:56<08:40, 589kB/s]pytorch_model.bin:  25%|█████████████▊                                        | 105M/412M [02:10<08:40, 589kB/s]pytorch_model.bin:  28%|███████████████▏                                      | 115M/412M [02:15<08:36, 574kB/s]pytorch_model.bin:  28%|███████████████▏                                      | 115M/412M [02:30<08:36, 574kB/s]pytorch_model.bin:  31%|████████████████▌                                     | 126M/412M [02:34<08:20, 571kB/s]pytorch_model.bin:  31%|████████████████▌                                     | 126M/412M [02:50<08:20, 571kB/s]pytorch_model.bin:  33%|█████████████████▉                                    | 136M/412M [02:51<07:53, 582kB/s]pytorch_model.bin:  36%|███████████████████▎                                  | 147M/412M [03:08<07:24, 596kB/s]pytorch_model.bin:  36%|███████████████████▎                                  | 147M/412M [03:20<07:24, 596kB/s]pytorch_model.bin:  38%|████████████████████▋                                 | 157M/412M [03:21<06:34, 645kB/s]pytorch_model.bin:  41%|██████████████████████                                | 168M/412M [03:36<06:10, 659kB/s]pytorch_model.bin:  43%|███████████████████████▍                              | 178M/412M [03:48<05:24, 718kB/s]pytorch_model.bin:  46%|████████████████████████▊                             | 189M/412M [03:59<04:49, 771kB/s]pytorch_model.bin:  48%|██████████████████████████▏                           | 199M/412M [04:09<04:15, 832kB/s]pytorch_model.bin:  48%|██████████████████████████▏                           | 199M/412M [04:20<04:15, 832kB/s]pytorch_model.bin:  51%|███████████████████████████▌                          | 210M/412M [04:21<04:00, 840kB/s]pytorch_model.bin:  53%|████████████████████████████▉                         | 220M/412M [04:38<04:12, 759kB/s]pytorch_model.bin:  53%|████████████████████████████▉                         | 220M/412M [04:50<04:12, 759kB/s]pytorch_model.bin:  56%|██████████████████████████████▎                       | 231M/412M [04:50<03:47, 796kB/s]pytorch_model.bin:  59%|███████████████████████████████▋                      | 241M/412M [05:04<03:38, 781kB/s]pytorch_model.bin:  61%|█████████████████████████████████                     | 252M/412M [05:16<03:20, 798kB/s]pytorch_model.bin:  61%|█████████████████████████████████                     | 252M/412M [05:30<03:20, 798kB/s]pytorch_model.bin:  64%|██████████████████████████████████▍                   | 262M/412M [05:41<03:54, 637kB/s]pytorch_model.bin:  64%|██████████████████████████████████▍                   | 262M/412M [06:00<03:54, 637kB/s]pytorch_model.bin:  66%|███████████████████████████████████▊                  | 273M/412M [06:00<03:49, 607kB/s]pytorch_model.bin:  66%|███████████████████████████████████▊                  | 273M/412M [06:20<03:49, 607kB/s]pytorch_model.bin:  69%|█████████████████████████████████████▏                | 283M/412M [06:21<03:47, 564kB/s]pytorch_model.bin:  69%|█████████████████████████████████████▏                | 283M/412M [06:40<03:47, 564kB/s]pytorch_model.bin:  71%|██████████████████████████████████████▌               | 294M/412M [06:41<03:31, 559kB/s]pytorch_model.bin:  74%|███████████████████████████████████████▉              | 304M/412M [06:56<03:03, 587kB/s]pytorch_model.bin:  74%|███████████████████████████████████████▉              | 304M/412M [07:10<03:03, 587kB/s]pytorch_model.bin:  76%|█████████████████████████████████████████▎            | 315M/412M [07:10<02:34, 629kB/s]pytorch_model.bin:  79%|██████████████████████████████████████████▋           | 325M/412M [07:27<02:16, 633kB/s]pytorch_model.bin:  79%|██████████████████████████████████████████▋           | 325M/412M [07:40<02:16, 633kB/s]pytorch_model.bin:  82%|████████████████████████████████████████████          | 336M/412M [07:45<02:05, 607kB/s]pytorch_model.bin:  82%|████████████████████████████████████████████          | 336M/412M [08:00<02:05, 607kB/s]pytorch_model.bin:  84%|█████████████████████████████████████████████▍        | 346M/412M [08:07<01:55, 567kB/s]pytorch_model.bin:  87%|██████████████████████████████████████████████▊       | 357M/412M [08:19<01:27, 630kB/s]pytorch_model.bin:  87%|██████████████████████████████████████████████▊       | 357M/412M [08:30<01:27, 630kB/s]pytorch_model.bin:  89%|████████████████████████████████████████████████▏     | 367M/412M [08:43<01:19, 562kB/s]pytorch_model.bin:  89%|████████████████████████████████████████████████▏     | 367M/412M [09:00<01:19, 562kB/s]pytorch_model.bin:  92%|█████████████████████████████████████████████████▌    | 377M/412M [09:03<01:02, 546kB/s]pytorch_model.bin:  92%|█████████████████████████████████████████████████▌    | 377M/412M [09:20<01:02, 546kB/s]pytorch_model.bin:  94%|██████████████████████████████████████████████████▉   | 388M/412M [09:21<00:42, 559kB/s]pytorch_model.bin:  94%|██████████████████████████████████████████████████▉   | 388M/412M [09:40<00:42, 559kB/s]pytorch_model.bin:  97%|████████████████████████████████████████████████████▎ | 398M/412M [10:00<00:31, 419kB/s]pytorch_model.bin:  97%|████████████████████████████████████████████████████▎ | 398M/412M [10:20<00:31, 419kB/s]pytorch_model.bin:  99%|█████████████████████████████████████████████████████▋| 409M/412M [10:28<00:06, 406kB/s]pytorch_model.bin: 100%|██████████████████████████████████████████████████████| 412M/412M [10:35<00:00, 406kB/s]pytorch_model.bin: 100%|██████████████████████████████████████████████████████| 412M/412M [10:35<00:00, 648kB/s]
Traceback (most recent call last):
  File "./f00566_image_segmentation.py", line 67, in <module>
    test_image_segmentation()
  File "./f00566_image_segmentation.py", line 55, in test_image_segmentation
    result = image_segmentation(test_image_url)
  File "./f00566_image_segmentation.py", line 43, in image_segmentation
    del feature_extractor, model, img, segmentator
UnboundLocalError: local variable 'img' referenced before assignment
